import{j as e,r as x}from"./react-vendor-DLdk58NU.js";import{n as p,B as f}from"./chat-DWKbrCFW.js";import{aK as g,h as N,aL as v,f as h,e as w,A as C}from"./lucide-icons-BgbkIPPx.js";import"./vendor-DW66a48r.js";const P=()=>e.jsx("div",{className:"flex flex-col items-center justify-center h-full bg-slate-50 p-6 animate-fade-in",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl border border-slate-100 max-w-sm w-full flex flex-col items-center",children:[e.jsx("div",{className:"bg-blue-100 p-4 rounded-full mb-4 animate-pulse",children:e.jsx(g,{size:32,className:"text-blue-600"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"クリティカルシンキング発動中..."}),e.jsxs("p",{className:"text-slate-500 text-center text-sm",children:["議論が水掛け論にならないよう、",e.jsx("br",{}),"前提条件とゴールを整理しています。"]}),e.jsx(N,{className:"animate-spin text-blue-500 mt-6",size:24})]})}),k=({premises:s,setPremises:a,isEditing:t,onToggleEdit:i})=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden mb-6",children:[e.jsxs("div",{className:"bg-slate-50 border-b border-slate-100 p-4 flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-slate-700",children:"AIからの提案"}),e.jsxs("button",{onClick:i,className:`text-xs flex items-center gap-1 px-3 py-1.5 rounded-lg border transition-all ${t?"bg-blue-100 text-blue-700 border-blue-200":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50"}`,children:[e.jsx(v,{size:14}),t?"編集を終了":"前提を修正"]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-2 flex items-center gap-2",children:[e.jsx(h,{size:16})," キーワードの定義"]}),t?e.jsx("textarea",{value:s.definitions,onChange:l=>a({...s,definitions:l.target.value}),className:"w-full p-3 rounded-xl border border-blue-300 focus:ring-2 focus:ring-blue-100 outline-none text-slate-800 bg-white text-sm leading-relaxed min-h-[100px]"}):e.jsx("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100 text-slate-800 leading-relaxed text-sm",children:s.definitions})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-2 flex items-center gap-2",children:[e.jsx(w,{size:16})," 議論のゴール"]}),t?e.jsx("textarea",{value:s.goal,onChange:l=>a({...s,goal:l.target.value}),className:"w-full p-3 rounded-xl border border-blue-300 focus:ring-2 focus:ring-blue-100 outline-none text-slate-800 bg-white text-sm leading-relaxed min-h-[100px]"}):e.jsx("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100 text-slate-800 leading-relaxed text-sm",children:s.goal})]})]}),t&&e.jsxs("div",{className:"px-6 pb-6 text-xs text-amber-600 flex items-center gap-1.5",children:[e.jsx(h,{size:12}),e.jsx("span",{children:"内容を変更すると、AIはこの前提に基づいて議論を行います。"})]})]}),y=(s,a,t)=>{const[i,l]=x.useState(!0),[r,o]=x.useState({definitions:"",goal:""}),[d,m]=x.useState(!1);x.useEffect(()=>{let n=!0;return(async()=>{try{const c=await p(s.topic);n&&(o(c.data),t(c.usage),l(!1))}catch(c){console.error(c),n&&l(!1)}})(),()=>{n=!1}},[s.topic]);const b=()=>{a(r)},u=()=>{m(n=>!n)},j=d&&(!r.definitions.trim()||!r.goal.trim());return{loading:i,premises:r,setPremises:o,isEditing:d,toggleEdit:u,handleStart:b,isStartDisabled:j}},B=({settings:s,onConfirm:a,onBack:t,onTokenUpdate:i})=>{const{loading:l,premises:r,setPremises:o,isEditing:d,toggleEdit:m,handleStart:b,isStartDisabled:u}=y(s,a,i);return l?e.jsx(P,{}):e.jsx("div",{className:"flex flex-col h-full bg-slate-50 p-4 md:p-8 animate-fade-in overflow-y-auto",children:e.jsxs("div",{className:"max-w-3xl mx-auto w-full",children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 flex items-center justify-center gap-2",children:[e.jsx(g,{className:"text-blue-600"}),"前提の確認 (Premise Check)"]}),e.jsxs("p",{className:"text-slate-600 mt-2",children:["議論を始める前に、「言葉の定義」と「議論のゴール」をすり合わせましょう。",e.jsx("br",{}),"水掛け論（Talking past each other）を防ぎ、建設的な議論を行うための重要なステップです。"]})]}),e.jsx(k,{premises:r,setPremises:o,isEditing:d,onToggleEdit:m}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(f,{variant:"secondary",onClick:t,className:"flex-1",children:"戻る"}),e.jsxs(f,{onClick:b,className:"flex-[2] text-lg font-bold shadow-lg",disabled:u,children:["この前提で議論開始 ",e.jsx(C,{size:20,className:"ml-2"})]})]})]})})};export{B as PremiseCheckScreen};
