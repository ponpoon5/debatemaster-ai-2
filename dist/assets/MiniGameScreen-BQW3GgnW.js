import{r as o,j as e,R as V}from"./react-vendor-DLdk58NU.js";import{M as c,x as H,y as Q,B as b}from"./chat-DWKbrCFW.js";import"./vendor-DW66a48r.js";import{aD as Z,Y as q,C as W,a as $,c as P,F as Y,aO as K,ah as _,aH as J,aP as X,Z as ee,A as se,w as te,a5 as le,aQ as ae,aR as re,h as ne}from"./lucide-icons-BgbkIPPx.js";const L=5,ie=(l,i)=>{const[t,r]=o.useState("menu"),[s,a]=o.useState(null),[n,d]=o.useState(null),[v,g]=o.useState(0),[S,f]=o.useState(0),[j,h]=o.useState(1),[u,k]=o.useState(0),[p,N]=o.useState(0),[T,C]=o.useState(null),A=o.useRef(null);o.useEffect(()=>{i&&t==="menu"&&R(i)},[i]),o.useEffect(()=>(t==="playing"&&u>0&&(A.current=setInterval(()=>{k(x=>x<=1?(s===c.COMBO_REBUTTAL&&y(),0):x-1)},1e3)),()=>clearInterval(A.current)),[t,u,s]);const R=async x=>{a(x),r("loading"),g(0),N(0),h(1),C(null);const m=x===c.COMBO_REBUTTAL?90:0;k(m);try{await I(x)}catch(w){console.error(w),r("menu")}},I=async x=>{C(null),r("loading");try{const{data:m,usage:w}=await H(x);l(w),d(m),r("playing")}catch(m){console.error("Failed to load round",m)}},U=async x=>{if(!(!s||!n)){r("loading");try{if(s===c.FALLACY_QUIZ){const O=n.options[x]===n.correctFallacy;z({score:O?100:0,feedback:O?`æ­£è§£ï¼

${n.explanation||""}`:`ä¸æ­£è§£...
æ­£è§£ã¯ã€Œ${n.correctFallacy}ã€ã§ã—ãŸã€‚

${n.explanation||""}`});return}const{score:m,feedback:w,usage:D}=await Q(s,n,x);l(D),z({score:m,feedback:w})}catch(m){console.error(m)}}},z=x=>{g(m=>m+x.score),f(x.score),C(x.feedback),x.score>60?N(m=>m+1):N(0),r("feedback")},G=()=>{s&&(s===c.COMBO_REBUTTAL?u>0?I(s):y():j<L?(h(x=>x+1),I(s)):y())},y=()=>{clearInterval(A.current),r("result")},M=()=>{switch(s){case c.EVIDENCE_FILL:return"Evidenceç©´åŸ‹ã‚ãƒãƒ£ãƒ¬ãƒ³ã‚¸";case c.FALLACY_QUIZ:return"èª¤è¬¬ï¼ˆFallacyï¼‰ã‚¯ã‚¤ã‚º";case c.ISSUE_PUZZLE:return"è«–ç‚¹æ•´ç†ãƒ‘ã‚ºãƒ«";case c.COMBO_REBUTTAL:return"åè«–ã‚³ãƒ³ãƒœã‚¢ã‚¿ãƒƒã‚¯";case c.FERMI_ESTIMATION:return"ãƒ•ã‚§ãƒ«ãƒŸæŽ¨å®š";case c.LATERAL_THINKING:return"æ°´å¹³æ€è€ƒãƒ‘ã‚ºãƒ«";case c.ACTIVE_INOCULATION:return"èƒ½å‹•çš„æŽ¥ç¨®æ¼”ç¿’";default:return"ãƒŸãƒ‹ã‚²ãƒ¼ãƒ "}},E=s===c.COMBO_REBUTTAL,B=E&&u>0||!E&&j<L;return{gameState:t,activeGameType:s,gameData:n,score:v,roundScore:S,round:j,timeLeft:u,combo:p,feedback:T,startGame:R,submitAnswer:U,handleNext:G,finishGame:y,getGameTitle:M,isTimeBased:E,isNextAvailable:B,TOTAL_ROUNDS:L}},oe=({data:l,onSubmit:i})=>{const[t,r]=o.useState("");return o.useEffect(()=>{r("")},[l]),e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl border border-slate-100 text-center w-full",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase mb-6 tracking-wider",children:"è­°è«–ã‚’å®Œæˆã•ã›ã‚ˆ (Complete the Argument)"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800 mb-8 leading-relaxed",children:l.incompleteClaim.split("_________").map((s,a)=>e.jsxs(V.Fragment,{children:[s,a===0&&e.jsx("span",{className:"text-pink-500 border-b-2 border-pink-500 px-2 italic bg-pink-50 mx-1 rounded",children:"æ ¹æ‹ ã¯ï¼Ÿ"})]},a))}),e.jsx("textarea",{autoFocus:!0,value:t,onChange:s=>r(s.target.value),placeholder:"ã“ã“ã«å…¥ã‚‹æ ¹æ‹ ã‚’å…¥åŠ›...",className:"w-full p-5 rounded-2xl border-2 border-slate-200 focus:border-pink-400 outline-none text-lg mb-6 bg-white text-slate-800 shadow-inner resize-none transition-colors",rows:4}),e.jsx(b,{onClick:()=>i(t),fullWidth:!0,className:"h-14 text-lg bg-pink-600 hover:bg-pink-700 text-white font-bold shadow-lg",disabled:!t.trim(),children:"é€ä¿¡ã™ã‚‹"})]})},de=({data:l,onSubmit:i})=>{const[t,r]=o.useState(null);return o.useEffect(()=>{r(null)},[l]),e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl border border-slate-100 w-full",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase mb-6 text-center tracking-wider",children:"èª¤è¬¬ã‚’ç‰¹å®šã›ã‚ˆ (Identify the Fallacy)"}),e.jsx("div",{className:"bg-white p-6 rounded-2xl mb-8 text-center border-2 border-pink-100 shadow-sm",children:e.jsxs("p",{className:"text-xl font-bold text-pink-700",children:['"',l.questionText,'"']})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.options.map((s,a)=>e.jsx("button",{onClick:()=>{r(a)},className:`p-5 rounded-2xl border-2 transition-all font-bold text-left shadow-sm ${t===a?"border-pink-500 bg-pink-50 text-pink-700 ring-2 ring-pink-200":"border-slate-200 hover:border-pink-300 bg-white text-slate-700 hover:shadow-md"}`,children:s},a))}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(b,{onClick:()=>t!==null&&i(t),disabled:t===null,className:"bg-pink-600 hover:bg-pink-700 text-white px-16 h-14 text-lg font-bold shadow-lg",children:"æ±ºå®š"})})]})},ce=({data:l,onSubmit:i})=>{const[t,r]=o.useState([]);o.useEffect(()=>{r([...l.segments].sort(()=>Math.random()-.5))},[l]);const s=(a,n)=>{const d=[...t];if(n==="up"){if(a===0)return;[d[a],d[a-1]]=[d[a-1],d[a]]}else{if(a===d.length-1)return;[d[a],d[a+1]]=[d[a+1],d[a]]}r(d)};return e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl border border-slate-100 w-full",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase mb-6 text-center tracking-wider",children:"è«–ç†ã‚’ä¸¦ã¹æ›¿ãˆã‚ˆ (Reorder Logic)"}),e.jsx("div",{className:"space-y-3",children:t.map((a,n)=>e.jsxs("div",{className:"flex gap-4 items-center group",children:[e.jsxs("div",{className:"flex flex-col gap-1 shrink-0",children:[e.jsx("button",{onClick:()=>s(n,"up"),className:"p-1 hover:bg-slate-100 rounded text-slate-400 hover:text-slate-600 transition-colors",disabled:n===0,children:"â–²"}),e.jsx("button",{onClick:()=>s(n,"down"),className:"p-1 hover:bg-slate-100 rounded text-slate-400 hover:text-slate-600 transition-colors",disabled:n===t.length-1,children:"â–¼"})]}),e.jsx("div",{className:"flex-1 p-5 bg-white border-2 border-slate-200 rounded-2xl font-bold text-slate-700 flex items-center shadow-sm group-hover:border-blue-300 transition-colors",children:a.text})]},a.id))}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(b,{onClick:()=>i(t.map(a=>a.id)),className:"bg-pink-600 hover:bg-pink-700 text-white px-16 h-14 text-lg font-bold shadow-lg",children:"å®Œäº†"})})]})},xe=({data:l,onSubmit:i})=>e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl border border-slate-100 text-center w-full",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase mb-6 tracking-wider",children:"å³åº§ã«åè«–ã›ã‚ˆ (Instant Rebuttal)"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-800 mb-8 leading-relaxed px-4",children:['"',l.claim,'"']}),e.jsxs("form",{onSubmit:t=>{t.preventDefault();const s=new FormData(t.currentTarget).get("rebuttal");s.trim()&&i(s)},children:[e.jsx("textarea",{name:"rebuttal",autoFocus:!0,placeholder:"åè«–ã‚’å…¥åŠ›...",className:"w-full p-5 rounded-2xl border-2 border-slate-200 focus:border-pink-400 outline-none text-lg mb-6 bg-white text-slate-800 shadow-inner resize-none transition-colors",rows:4}),e.jsx(b,{type:"submit",fullWidth:!0,className:"h-14 text-lg bg-pink-600 hover:bg-pink-700 text-white font-bold shadow-lg",children:"åæ’ƒã™ã‚‹"})]})]}),me=({data:l,onSubmit:i})=>{const[t,r]=o.useState(""),[s,a]=o.useState("");return e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl border border-slate-100 w-full",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6 text-teal-600",children:[e.jsx(Z,{size:24}),e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider",children:"ãƒ•ã‚§ãƒ«ãƒŸæŽ¨å®š (Fermi Estimation)"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl mb-8 text-center border border-teal-100 shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-teal-600 block mb-2",children:"QUESTION"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-800 leading-relaxed",children:['"',l.question,'"']})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"åˆ†è§£ãƒ­ã‚¸ãƒƒã‚¯ãƒ»ä»®èª¬ (Logic & Assumptions)"}),e.jsx("textarea",{value:t,onChange:n=>r(n.target.value),placeholder:`ä¾‹ï¼šæ—¥æœ¬ã®äººå£(1.2å„„) Ã— ä¸–å¸¯æ™®åŠçŽ‡(20%) Ã· è€ç”¨å¹´æ•°(10å¹´) ...
ã©ã®ã‚ˆã†ã«è¦ç´ ã‚’åˆ†è§£ã—ã€æ•°å€¤ã‚’ä»®å®šã—ãŸã‹è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚`,className:"w-full p-4 rounded-xl border-2 border-slate-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-100 outline-none text-sm min-h-[140px] bg-white text-slate-800 shadow-inner resize-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"æŽ¨å®šå€¤ (Estimated Value)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",value:s,onChange:n=>a(n.target.value),placeholder:"ä¾‹ï¼š150ä¸‡å°",className:"flex-1 p-4 rounded-xl border-2 border-slate-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-100 outline-none text-lg font-bold text-right bg-white text-slate-800 shadow-inner transition-colors"}),e.jsx("span",{className:"text-slate-500 font-bold px-2",children:"Answer"})]})]}),e.jsx(b,{onClick:()=>i({logic:t,value:s}),fullWidth:!0,className:"h-14 text-lg bg-teal-600 hover:bg-teal-700 text-white font-bold shadow-lg",disabled:!t.trim()||!s.trim(),children:"å›žç­”ã‚’æ¤œè¨¼ã™ã‚‹"})]})]})},be=({data:l,onSubmit:i})=>{const[t,r]=o.useState("");return e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl border border-slate-100 w-full",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6 text-indigo-600",children:[e.jsx(q,{size:24}),e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider",children:"æ°´å¹³æ€è€ƒãƒ‘ã‚ºãƒ« (Lateral Thinking)"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl mb-8 relative overflow-hidden border border-indigo-100 shadow-sm",children:[e.jsx(W,{size:100,className:"absolute -right-4 -bottom-4 text-indigo-50 -rotate-12 pointer-events-none"}),e.jsx("span",{className:"text-xs font-bold text-indigo-600 block mb-2",children:"SITUATION (çŠ¶æ³)"}),e.jsx("p",{className:"text-xl font-bold text-slate-800 leading-relaxed relative z-10",children:l.situation})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"ã‚ãªãŸã®æŽ¨ç† (Hypothesis)"}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"ãªãœã“ã®ã‚ˆã†ãªçŠ¶æ³ã«ãªã£ãŸã®ã‹ï¼Ÿå¸¸è­˜ã«ã¨ã‚‰ã‚ã‚Œãšã€éš ã•ã‚ŒãŸçœŸç›¸ã‚’æŽ¨ç†ã—ã¦ãã ã•ã„ã€‚"}),e.jsx("textarea",{value:t,onChange:s=>r(s.target.value),placeholder:"çœŸç›¸ã¯...",className:"w-full p-5 rounded-xl border-2 border-slate-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 outline-none text-base min-h-[140px] bg-white text-slate-800 shadow-inner resize-none transition-colors"})]}),e.jsx(b,{onClick:()=>i(t),fullWidth:!0,className:"h-14 text-lg bg-indigo-600 hover:bg-indigo-700 text-white font-bold shadow-lg",disabled:!t.trim(),children:"æŽ¨ç†ã™ã‚‹"})]})]})},F={"ã‚¹ãƒˆãƒ­ãƒ¼ãƒžãƒ³ (è—äººå½¢è«–æ³•)":"ç›¸æ‰‹ã®ä¸»å¼µã‚’æ­ªã‚ã¦ã€åè«–ã—ã‚„ã™ã„å½¢ã«å¤‰ãˆã¦ã‹ã‚‰æ”»æ’ƒã™ã‚‹æ‰‹æ³•ã€‚ä¾‹: ã€Œç’°å¢ƒä¿è­·ã‚’ä¸»å¼µã™ã‚‹äººã¯ã€çµŒæ¸ˆç™ºå±•ã‚’å…¨ãç„¡è¦–ã—ã¦ã„ã‚‹ã€","ã‚¹ãƒˆãƒ­ãƒ¼ãƒžãƒ³ï¼ˆè—äººå½¢è«–æ³•ï¼‰":"ç›¸æ‰‹ã®ä¸»å¼µã‚’æ­ªã‚ã¦ã€åè«–ã—ã‚„ã™ã„å½¢ã«å¤‰ãˆã¦ã‹ã‚‰æ”»æ’ƒã™ã‚‹æ‰‹æ³•ã€‚ä¾‹: ã€Œç’°å¢ƒä¿è­·ã‚’ä¸»å¼µã™ã‚‹äººã¯ã€çµŒæ¸ˆç™ºå±•ã‚’å…¨ãç„¡è¦–ã—ã¦ã„ã‚‹ã€","è«–ç‚¹ãšã‚‰ã— (Red Herring)":"æœ¬æ¥ã®è­°è«–ã‹ã‚‰æ³¨æ„ã‚’ãã‚‰ã—ã€é–¢ä¿‚ã®ãªã„è©±é¡Œã«èª˜å°Žã™ã‚‹æ‰‹æ³•ã€‚ä¾‹: ã€Œç¨Žé‡‘ã®è©±ã‚’ã—ã¦ã„ã‚‹ã®ã«ã€çªç„¶æ”¿æ²»å®¶ã®ã‚¹ã‚­ãƒ£ãƒ³ãƒ€ãƒ«ã‚’æŒã¡å‡ºã™ã€","è«–ç‚¹ãšã‚‰ã—ï¼ˆRed Herringï¼‰":"æœ¬æ¥ã®è­°è«–ã‹ã‚‰æ³¨æ„ã‚’ãã‚‰ã—ã€é–¢ä¿‚ã®ãªã„è©±é¡Œã«èª˜å°Žã™ã‚‹æ‰‹æ³•ã€‚ä¾‹: ã€Œç¨Žé‡‘ã®è©±ã‚’ã—ã¦ã„ã‚‹ã®ã«ã€çªç„¶æ”¿æ²»å®¶ã®ã‚¹ã‚­ãƒ£ãƒ³ãƒ€ãƒ«ã‚’æŒã¡å‡ºã™ã€",æ—©æ€¥ãªä¸€èˆ¬åŒ–:"å°‘æ•°ã®äº‹ä¾‹ã‹ã‚‰æ€§æ€¥ã«å…¨ä½“çš„ãªçµè«–ã‚’å°Žãæ‰‹æ³•ã€‚ä¾‹: ã€Œç§ã®å‹äºº2äººãŒå¤±æ•—ã—ãŸã‹ã‚‰ã€ã“ã®æ–¹æ³•ã¯çµ¶å¯¾ã«ãƒ€ãƒ¡ã ã€",èª¤ã£ãŸäºŒåˆ†æ³•:"å®Ÿéš›ã«ã¯è¤‡æ•°ã®é¸æŠžè‚¢ãŒã‚ã‚‹ã®ã«ã€2ã¤ã®æ¥µç«¯ãªé¸æŠžè‚¢ã—ã‹ãªã„ã‚ˆã†ã«è¦‹ã›ã‹ã‘ã‚‹æ‰‹æ³•ã€‚ä¾‹: ã€Œã“ã®æ”¿ç­–ã«è³›æˆã—ãªã„ãªã‚‰ã€ã‚ãªãŸã¯å›½ã‚’æ„›ã—ã¦ã„ãªã„ã€","äººèº«æ”»æ’ƒ (Ad Hominem)":"è­°è«–ã®å†…å®¹ã§ã¯ãªãã€ä¸»å¼µã™ã‚‹äººã®äººæ ¼ã‚„èƒŒæ™¯ã‚’æ”»æ’ƒã™ã‚‹æ‰‹æ³•ã€‚ä¾‹: ã€Œã‚ãªãŸã¯å°‚é–€å®¶ã˜ã‚ƒãªã„ã‹ã‚‰ã€ãã®æ„è¦‹ã¯é–“é•ã£ã¦ã„ã‚‹ã€","äººèº«æ”»æ’ƒï¼ˆAd Hominemï¼‰":"è­°è«–ã®å†…å®¹ã§ã¯ãªãã€ä¸»å¼µã™ã‚‹äººã®äººæ ¼ã‚„èƒŒæ™¯ã‚’æ”»æ’ƒã™ã‚‹æ‰‹æ³•ã€‚ä¾‹: ã€Œã‚ãªãŸã¯å°‚é–€å®¶ã˜ã‚ƒãªã„ã‹ã‚‰ã€ãã®æ„è¦‹ã¯é–“é•ã£ã¦ã„ã‚‹ã€","ãŠå‰ã ã£ã¦è«–æ³• (Tu Quoque)":"ç›¸æ‰‹ã‚‚åŒã˜ã“ã¨ã‚’ã—ã¦ã„ã‚‹ã‹ã‚‰è‡ªåˆ†ã‚‚è¨±ã•ã‚Œã‚‹ã¨ã„ã†è«–æ³•ã€‚ä¾‹: ã€Œã‚ãªãŸã ã£ã¦é…åˆ»ã—ãŸã“ã¨ã‚ã‚‹ã§ã—ã‚‡ã†ï¼Ÿã€","ãŠå‰ã ã£ã¦è«–æ³•ï¼ˆTu Quoqueï¼‰":"ç›¸æ‰‹ã‚‚åŒã˜ã“ã¨ã‚’ã—ã¦ã„ã‚‹ã‹ã‚‰è‡ªåˆ†ã‚‚è¨±ã•ã‚Œã‚‹ã¨ã„ã†è«–æ³•ã€‚ä¾‹: ã€Œã‚ãªãŸã ã£ã¦é…åˆ»ã—ãŸã“ã¨ã‚ã‚‹ã§ã—ã‚‡ã†ï¼Ÿã€",å¾ªç’°è«–æ³•:"è¨¼æ˜Žã™ã¹ãçµè«–ã‚’å‰æã¨ã—ã¦ä½¿ç”¨ã™ã‚‹è«–æ³•ã€‚ä¾‹: ã€Œã“ã®æœ¬ã¯æ­£ã—ã„ã€‚ãªãœãªã‚‰ã“ã®æœ¬ã«ãã†æ›¸ã„ã¦ã‚ã‚‹ã‹ã‚‰ã€",æ¨©å¨ã¸ã®è¨´ãˆ:"æ¨©å¨ã‚ã‚‹äººç‰©ã‚„çµ„ç¹”ã®åå‰ã‚’å‡ºã™ã“ã¨ã§ã€ä¸»å¼µã‚’æ­£å½“åŒ–ã—ã‚ˆã†ã¨ã™ã‚‹æ‰‹æ³•ã€‚ä¾‹: ã€Œæœ‰åãªæ•™æŽˆãŒãã†è¨€ã£ã¦ã„ã‚‹ã‹ã‚‰æ­£ã—ã„ã€",æ„Ÿæƒ…ã«è¨´ãˆã‚‹è«–è¨¼:"è«–ç†ã§ã¯ãªãã€ææ€–ãƒ»åŒæƒ…ãƒ»æ€’ã‚Šãªã©ã®æ„Ÿæƒ…ã«è¨´ãˆã¦èª¬å¾—ã—ã‚ˆã†ã¨ã™ã‚‹æ‰‹æ³•ã€‚ä¾‹: ã€Œå­ä¾›ãŸã¡ã®æœªæ¥ã®ãŸã‚ã«ã€ä»Šã™ãã“ã‚Œã‚’è²·ã‚ãªã„ã¨ï¼ã€","ã™ã¹ã‚Šå‚è«–æ³• (Slippery Slope)":"ã‚ã‚‹è¡Œå‹•ãŒé€£éŽ–çš„ã«æ‚ªã„çµæžœã‚’æ‹›ãã¨ä¸»å¼µã™ã‚‹ãŒã€ãã®å› æžœé–¢ä¿‚ãŒä¸æ˜Žç¢ºãªè«–æ³•ã€‚ä¾‹: ã€Œã‚²ãƒ¼ãƒ ã‚’è¨±ã›ã°ã€æ¬¡ã¯æ·±å¤œå¾˜å¾Šã€æœ€çµ‚çš„ã«ã¯çŠ¯ç½ªè€…ã«ãªã‚‹ã€","ã™ã¹ã‚Šå‚è«–æ³•ï¼ˆSlippery Slopeï¼‰":"ã‚ã‚‹è¡Œå‹•ãŒé€£éŽ–çš„ã«æ‚ªã„çµæžœã‚’æ‹›ãã¨ä¸»å¼µã™ã‚‹ãŒã€ãã®å› æžœé–¢ä¿‚ãŒä¸æ˜Žç¢ºãªè«–æ³•ã€‚ä¾‹: ã€Œã‚²ãƒ¼ãƒ ã‚’è¨±ã›ã°ã€æ¬¡ã¯æ·±å¤œå¾˜å¾Šã€æœ€çµ‚çš„ã«ã¯çŠ¯ç½ªè€…ã«ãªã‚‹ã€"},he=l=>{if(F[l])return F[l];for(const[i,t]of Object.entries(F))if(i.includes(l)||l.includes(i.split("(")[0].trim())||l.includes(i.split("ï¼ˆ")[0].trim()))return t;return"ã“ã®è©­å¼ã®èª¬æ˜Žã¯æº–å‚™ä¸­ã§ã™ã€‚ä¸€èˆ¬çš„ã«ã¯è«–ç†çš„ãªèª¤ã‚Šã‚„ä¸å½“ãªèª¬å¾—æŠ€æ³•ã‚’æŒ‡ã—ã¾ã™ã€‚"},ue=({data:l,onSubmit:i})=>{const[t,r]=o.useState(""),[s,a]=o.useState(null);return o.useEffect(()=>{r(""),a(null)},[l]),e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl border border-slate-100 w-full",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase mb-6 text-center tracking-wider",children:"èƒ½å‹•çš„æŽ¥ç¨®æ¼”ç¿’ (Active Inoculation)"}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-2xl mb-6 border-2 border-purple-100",children:[e.jsxs("h4",{className:"text-xs font-bold text-purple-600 uppercase mb-3 flex items-center gap-2",children:[e.jsx($,{size:16}),"ã‚·ãƒŠãƒªã‚ª"]}),e.jsx("p",{className:"text-lg text-slate-700 leading-relaxed",children:l.scenario})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsxs("h4",{className:"text-xs font-bold text-blue-600 uppercase mb-2 flex items-center gap-2",children:[e.jsx(P,{size:14}),"èª¬å¾—å¯¾è±¡"]}),e.jsx("p",{className:"text-sm font-semibold text-slate-700",children:l.targetAudience})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100",children:[e.jsxs("h4",{className:"text-xs font-bold text-green-600 uppercase mb-2 flex items-center gap-2",children:[e.jsx(Y,{size:14}),"ç›®æ¨™"]}),e.jsx("p",{className:"text-sm font-semibold text-slate-700",children:l.objective})]})]}),e.jsxs("div",{className:"bg-rose-50 p-6 rounded-2xl mb-6 border-2 border-rose-100",children:[e.jsxs("h4",{className:"text-xs font-bold text-rose-600 uppercase mb-3 flex items-center gap-2",children:[e.jsx(K,{size:16}),"ä½¿ç”¨ã™ã¹ãè©­å¼ãƒ»èª¤è¬¬ (æœ€ä½Ž",l.requiredFallacies.length,"ã¤)"]}),e.jsx("p",{className:"text-xs text-rose-600 mb-3",children:"ðŸ’¡ ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨èª¬æ˜ŽãŒè¡¨ç¤ºã•ã‚Œã¾ã™"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-2",children:l.requiredFallacies.map((n,d)=>e.jsx("button",{onClick:()=>a(s===d?null:d),className:`bg-white px-4 py-2 rounded-lg text-sm font-semibold text-rose-700 border-2 shadow-sm transition-all text-left hover:shadow-md ${s===d?"border-rose-500 ring-2 ring-rose-200 bg-rose-50":"border-rose-200 hover:border-rose-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{children:[d+1,". ",n]}),e.jsx(_,{size:14,className:"opacity-60"})]})},d))}),s!==null&&e.jsx("div",{className:"mt-4 p-4 bg-white rounded-xl border-2 border-rose-300 animate-fade-in",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-rose-100 p-2 rounded-lg shrink-0",children:e.jsx(_,{size:20,className:"text-rose-600"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-rose-800 mb-2",children:l.requiredFallacies[s]}),e.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:he(l.requiredFallacies[s])})]})]})})]}),e.jsx("div",{className:"bg-amber-50 p-4 rounded-xl mb-6 border-l-4 border-amber-400",children:e.jsxs("p",{className:"text-xs text-amber-800 font-medium leading-relaxed",children:["âš ï¸"," ",e.jsx("strong",{children:"ã“ã®æ¼”ç¿’ã®ç›®çš„ã¯ã€Œè©­å¼ã‚’è¦‹æŠœãåŠ›ã‚’é¤Šã†ã“ã¨ã€ã§ã™ã€‚"}),"å®Ÿéš›ã®è­°è«–ã‚„ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã“ã‚Œã‚‰ã®è©­å¼ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯æŽ¨å¥¨ã•ã‚Œã¾ã›ã‚“ã€‚ è©­å¼ã®æ§‹é€ ã‚’ç†è§£ã™ã‚‹ã“ã¨ã§ã€ä»–è€…ã®ä¸å½“ãªè«–ç†æ“ä½œã‚’è­˜åˆ¥ã™ã‚‹èƒ½åŠ›ã‚’é«˜ã‚ã¾ã—ã‚‡ã†ã€‚"]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"ã‚ãªãŸã®èª¬å¾—æ–‡ (ãƒ¡ãƒ¼ãƒ«ã€ã‚¹ãƒ”ãƒ¼ãƒã€ä¸»å¼µæ–‡ãªã©)"}),e.jsx("textarea",{className:"w-full p-4 border-2 border-slate-200 rounded-xl focus:border-purple-400 focus:ring-2 focus:ring-purple-100 transition-all resize-none text-slate-700",rows:12,value:t,onChange:n=>r(n.target.value),placeholder:"æŒ‡å®šã•ã‚ŒãŸè©­å¼ã‚’å·§ã¿ã«çµ„ã¿åˆã‚ã›ã¦ã€èª¬å¾—åŠ›ã®ã‚ã‚‹æ–‡ç« ã‚’æ›¸ã„ã¦ãã ã•ã„..."}),e.jsx("div",{className:"mt-2 text-right",children:e.jsxs("span",{className:"text-xs text-slate-500",children:[t.length," æ–‡å­—"]})})]}),e.jsx("div",{className:"text-center",children:e.jsx(b,{onClick:()=>t.trim()&&i(t),disabled:!t.trim(),className:"bg-purple-600 hover:bg-purple-700 text-white px-16 h-14 text-lg font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"æå‡ºã—ã¦æŽ¡ç‚¹"})})]})},pe=({score:l,combo:i,rank:t,onRetry:r,onBack:s})=>e.jsxs("div",{className:"bg-white p-10 rounded-3xl shadow-2xl border border-slate-100 text-center animate-pop-in max-w-2xl w-full mx-auto",children:[e.jsxs("div",{className:"mb-6 relative inline-block",children:[e.jsx("div",{className:"absolute inset-0 bg-yellow-50 rounded-full blur-xl opacity-50 animate-pulse"}),e.jsx(J,{size:80,className:"text-yellow-500 relative z-10 drop-shadow-sm"})]}),e.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-1",children:"GAME FINISHED!"}),e.jsx("p",{className:"text-slate-400 text-sm font-bold uppercase tracking-widest mb-8",children:"ãŠç–²ã‚Œæ§˜ã§ã—ãŸ"}),e.jsx("div",{className:"py-6 border-y border-slate-100 mb-8",children:e.jsxs("div",{className:"flex items-baseline justify-center gap-2 mb-2",children:[e.jsx("span",{className:"text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-pink-600 to-purple-600 tracking-tighter",children:l}),e.jsx("span",{className:"text-2xl text-slate-400 font-bold",children:"pts"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-10",children:[e.jsxs("div",{className:"bg-white p-5 rounded-2xl border-2 border-slate-100 flex flex-col items-center shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Max Combo"}),e.jsx("div",{className:"text-3xl font-bold text-slate-800",children:i})]}),e.jsxs("div",{className:"bg-white p-5 rounded-2xl border-2 border-slate-100 flex flex-col items-center shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Rank"}),e.jsx("div",{className:`text-3xl font-black ${t==="S"?"text-yellow-500":t==="A"?"text-pink-500":"text-slate-700"}`,children:t})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(b,{variant:"secondary",onClick:s,fullWidth:!0,className:"h-14 text-lg font-bold border-slate-200 bg-white text-slate-600 hover:bg-slate-50",children:"çµ‚äº†ã™ã‚‹"}),e.jsxs(b,{onClick:r,fullWidth:!0,className:"h-14 text-lg bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-700 hover:to-purple-700 text-white shadow-lg font-bold",children:[e.jsx(X,{size:20,className:"mr-2"})," ã‚‚ã†ä¸€åº¦"]})]})]}),ge=({roundScore:l,feedback:i,onNext:t,isNextAvailable:r})=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in p-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-2xl max-w-md w-full text-center animate-pop-in border border-slate-100 overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"shrink-0",children:[e.jsx("div",{className:"text-5xl mb-2",children:l>60?"ðŸŽ‰":"ðŸ’ª"}),e.jsx("h3",{className:"text-xl font-black text-slate-800 mb-1",children:l>80?"Excellent!":l>40?"Good Job!":"Keep Trying!"}),e.jsxs("div",{className:"text-3xl font-bold text-pink-600 mb-4",children:["+",l," pts"]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-2xl text-left mb-6 overflow-y-auto flex-1 border border-slate-200 scrollbar-hide shadow-inner",children:[e.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase block mb-2 flex items-center gap-1",children:[e.jsx(ee,{size:12})," AI Feedback"]}),e.jsx("p",{className:"text-slate-700 text-sm leading-relaxed whitespace-pre-wrap",children:i})]}),e.jsx("div",{className:"shrink-0 pt-2",children:e.jsx(b,{onClick:t,fullWidth:!0,className:"bg-pink-600 hover:bg-pink-700 text-white h-14 text-lg font-bold shadow-lg",children:r?e.jsxs(e.Fragment,{children:["æ¬¡ã¸é€²ã‚€ ",e.jsx(se,{size:20,className:"ml-2"})]}):"çµæžœã‚’è¦‹ã‚‹"})})]})}),ve=({miniGameType:l,onBack:i,onTokenUpdate:t})=>{const{gameState:r,activeGameType:s,gameData:a,score:n,roundScore:d,round:v,timeLeft:g,combo:S,feedback:f,startGame:j,submitAnswer:h,handleNext:u,getGameTitle:k,isTimeBased:p,isNextAvailable:N,TOTAL_ROUNDS:T}=ie(t,l);return e.jsxs("div",{className:"h-full bg-white flex flex-col",children:[e.jsxs("header",{className:"bg-white border-b border-slate-100 px-6 py-4 flex items-center justify-between z-10 sticky top-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{onClick:i,variant:"ghost",className:"p-2 -ml-2 text-slate-500 hover:bg-slate-50",children:e.jsx(te,{size:20})}),e.jsxs("h2",{className:"text-lg font-bold text-pink-600 flex items-center gap-2",children:[e.jsx(le,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:k()}),e.jsx("span",{className:"sm:hidden",children:"ãƒŸãƒ‹ã‚²ãƒ¼ãƒ "})]})]}),(r==="playing"||r==="feedback")&&e.jsxs("div",{className:"flex items-center gap-4",children:[p?e.jsxs("div",{className:"flex items-center gap-1 font-mono text-xl font-bold text-slate-700",children:[e.jsx(ae,{size:20,className:g<10?"text-red-500 animate-pulse":"text-slate-400"}),g,"s"]}):e.jsxs("div",{className:"flex items-center gap-1 text-sm font-bold text-slate-600 bg-white px-3 py-1 rounded-full border border-slate-200",children:[e.jsx(re,{size:14,className:"text-slate-400"}),"Round ",v,"/",T]}),e.jsxs("div",{className:"bg-white px-3 py-1 rounded-full text-sm font-bold text-pink-600 border border-pink-100 shadow-sm",children:["Score: ",n]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col items-center justify-center relative bg-white",children:[r==="loading"&&e.jsxs("div",{className:"text-center animate-pulse",children:[e.jsx(ne,{size:48,className:"animate-spin text-pink-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-slate-600",children:f?"æŽ¡ç‚¹ä¸­...":p?"æ¬¡ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’æŽ¢ç´¢ä¸­...":`Round ${v} æº–å‚™ä¸­...`})]}),r==="result"&&e.jsx(pe,{score:n,combo:S,rank:n>(p?300:400)?"S":n>(p?200:300)?"A":n>(p?100:200)?"B":"C",onRetry:()=>s&&j(s),onBack:i}),(r==="playing"||r==="feedback")&&a&&e.jsxs("div",{className:"w-full flex justify-center animate-fade-in pb-20",children:[r==="feedback"&&f&&e.jsx(ge,{roundScore:d,feedback:f,onNext:u,isNextAvailable:N}),e.jsxs("div",{className:"w-full max-w-2xl",children:[s===c.EVIDENCE_FILL&&e.jsx(oe,{data:a,onSubmit:h}),s===c.FALLACY_QUIZ&&e.jsx(de,{data:a,onSubmit:h}),s===c.ISSUE_PUZZLE&&e.jsx(ce,{data:a,onSubmit:h}),s===c.COMBO_REBUTTAL&&e.jsx(xe,{data:a,onSubmit:h}),s===c.FERMI_ESTIMATION&&e.jsx(me,{data:a,onSubmit:h}),s===c.LATERAL_THINKING&&e.jsx(be,{data:a,onSubmit:h}),s===c.ACTIVE_INOCULATION&&e.jsx(ue,{data:a,onSubmit:h})]})]})]})]})};export{ve as MiniGameScreen};
