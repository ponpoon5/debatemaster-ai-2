import{j as e,r as k,R as Z}from"./react-vendor-DLdk58NU.js";import{h as P,S as J}from"./chat-DWKbrCFW.js";import{E as U,O as K,U as A,b as B,o as L,I as X,T as S,u as F,v as Q,S as z,J as q,a as R,Z as H,K as ee,n as W,N as $,Q as se,t as _,V as E,s as te,Y as I,G as le,_ as ae,$ as re,e as T,a0 as de,a1 as ne,a2 as ie,a3 as ce,a4 as xe,A as G,a5 as oe,B as me,a6 as he,a7 as be,a8 as pe,d as je,C as Y,f as ge,a9 as fe,aa as D}from"./lucide-icons-BgbkIPPx.js";function ue(s){return s.score!==void 0}const Ne=({reviews:s,messages:i,onPointClick:h})=>{const n=s.filter(ue).sort((l,a)=>l.messageIndex-a.messageIndex);if(n.length===0)return null;const x=600,o=200,b=30,f=x-b*2,j=o-b*2,u=10,v=n.map((l,a)=>{const N=n.length>1?b+a/(n.length-1)*f:x/2,d=o-b-l.score/u*j;return{x:N,y:d,score:l.score,messageIndex:l.messageIndex}}),r=v.length>1?`M ${v.map(l=>`${l.x},${l.y}`).join(" L ")}`:"",g=l=>l>=8?"#2563eb":l>=5?"#10b981":"#ef4444";return e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 w-full overflow-hidden animate-fade-in mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-slate-800",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-blue-600",children:e.jsx(U,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"ã‚¹ã‚³ã‚¢æŽ¨ç§» (Score Trend)"}),e.jsx("p",{className:"text-xs text-slate-500",children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨AIã®å¿œé…¬ã«ãŠã‘ã‚‹è«–ç†å¼·åº¦ã®å¤‰åŒ–"})]})]}),e.jsx("div",{className:"relative w-full aspect-[3/1] min-h-[150px]",children:e.jsxs("svg",{viewBox:`0 0 ${x} ${o}`,className:"w-full h-full overflow-visible",children:[[0,2.5,5,7.5,10].map(l=>{const a=o-b-l/u*j;return e.jsxs("g",{children:[e.jsx("line",{x1:b,y1:a,x2:x-b,y2:a,stroke:"#e2e8f0",strokeDasharray:"4 4"}),e.jsx("text",{x:b-10,y:a+4,textAnchor:"end",className:"text-[10px] fill-slate-400 font-mono",children:l})]},l)}),r&&e.jsxs(e.Fragment,{children:[e.jsx("path",{d:r,fill:"none",stroke:"#94a3b8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm opacity-50"}),e.jsx("path",{d:`${r} L ${v[v.length-1].x},${o-b} L ${v[0].x},${o-b} Z`,fill:"url(#gradient)",opacity:"0.1"})]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),e.jsx("stop",{offset:"100%",stopColor:"#ffffff"})]})}),v.map((l,a)=>{var p;const d=(((p=i[l.messageIndex])==null?void 0:p.role)||"model")==="user";return e.jsxs("g",{className:"group cursor-pointer",onClick:()=>h(l.messageIndex),children:[e.jsx("circle",{cx:l.x,cy:l.y,r:"15",fill:"transparent"}),d?e.jsx("circle",{cx:l.x,cy:l.y,r:"5",fill:g(l.score),stroke:"#fff",strokeWidth:"2",className:"transition-all duration-300 group-hover:scale-150 shadow-sm",style:{transformBox:"fill-box",transformOrigin:"center"}}):e.jsx("path",{d:`M ${l.x},${l.y-6} L ${l.x+6},${l.y} L ${l.x},${l.y+6} L ${l.x-6},${l.y} Z`,fill:g(l.score),stroke:"#fff",strokeWidth:"2",className:"transition-all duration-300 group-hover:scale-150 shadow-sm",style:{transformBox:"fill-box",transformOrigin:"center"}}),e.jsxs("g",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10",children:[e.jsx("rect",{x:l.x-35,y:l.y-50,width:"70",height:"35",rx:"6",fill:"#1e293b"}),e.jsx("path",{d:`M ${l.x-5},${l.y-15} L ${l.x},${l.y-10} L ${l.x+5},${l.y-15} Z`,fill:"#1e293b"}),e.jsxs("text",{x:l.x,y:l.y-32,textAnchor:"middle",fill:"white",className:"text-[10px] font-bold",children:[d?"USER":"AI",": ",l.score," pts"]}),e.jsxs("text",{x:l.x,y:l.y-20,textAnchor:"middle",fill:"#94a3b8",className:"text-[9px] font-mono",children:["Turn #",l.messageIndex+1]})]}),e.jsx("text",{x:l.x,y:o-10,textAnchor:"middle",className:"text-[10px] fill-slate-400 font-bold group-hover:fill-blue-600 transition-colors",children:l.messageIndex+1})]},a)})]})}),e.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-600 font-bold",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-400"})," User"]}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-600 font-bold",children:[e.jsx("span",{className:"w-2 h-2 rotate-45 bg-slate-400"})," AI"]})]}),e.jsx("div",{className:"w-px h-4 bg-slate-200"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-slate-500 font-medium",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#2563eb]"})," High (8-10)"]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-slate-500 font-medium",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#10b981]"})," Mid (5-7)"]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-slate-500 font-medium",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#ef4444]"})," Low (0-4)"]})]})]})]})},Me=({feedback:s,messages:i,isDemoMode:h})=>{var d,p;const[n,x]=k.useState(new Set),[o,b]=k.useState("ALL"),f=k.useRef({}),j=t=>{const c=new Set(n);c.has(t)?c.delete(t):c.add(t),x(c)},u=t=>{x(c=>{const m=new Set(c);return m.add(t),m}),setTimeout(()=>{const c=f.current[t];c&&(c.scrollIntoView({behavior:"smooth",block:"center"}),c.classList.add("ring-2","ring-blue-400","ring-offset-2"),setTimeout(()=>c.classList.remove("ring-2","ring-blue-400","ring-offset-2"),1500))},100)},v=t=>{try{if(h&&(t.trim().startsWith("{")||t.trim().startsWith("```json"))){const c=t.replace(/```json/g,"").replace(/```/g,"").trim(),m=JSON.parse(c);if(m&&typeof m.text=="string")return`${m.speakerName||m.speaker}: ${m.text}`}}catch{}return t},r=t=>t>=80?"text-emerald-600 bg-emerald-50 border-emerald-200":t>=60?"text-blue-600 bg-blue-50 border-blue-200":"text-amber-600 bg-amber-50 border-amber-200",g=(t,c,m)=>{const y=v(t),w=c==null?void 0:c.trim();if(!w||!y.includes(w))return y;const C=y.split(w),M=m?"bg-red-100 decoration-red-400 decoration-wavy underline decoration-2 underline-offset-4":"bg-purple-100 decoration-purple-400 decoration-wavy underline decoration-2 underline-offset-4";return e.jsx(e.Fragment,{children:C.map((V,O)=>e.jsxs(Z.Fragment,{children:[V,O<C.length-1&&e.jsx("span",{className:`px-1 rounded mx-0.5 font-medium ${M}`,children:w})]},O))})},l=({sbi:t})=>e.jsx("div",{className:"grid grid-cols-1 gap-3 mt-4",children:e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:e.jsxs("div",{className:"flex flex-col sm:flex-row divide-y sm:divide-y-0 sm:divide-x divide-slate-100",children:[e.jsxs("div",{className:"flex-1 p-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5 text-blue-600",children:[e.jsx(q,{size:14,strokeWidth:2.5}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Situation (çŠ¶æ³)"})]}),e.jsx("p",{className:"text-xs text-slate-700 leading-relaxed",children:t.situation})]}),e.jsxs("div",{className:"flex-1 p-3 bg-indigo-50/30",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5 text-indigo-600",children:[e.jsx(R,{size:14,strokeWidth:2.5}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Behavior (è¡Œå‹•)"})]}),e.jsx("p",{className:"text-xs text-slate-700 leading-relaxed font-medium",children:t.behavior})]}),e.jsxs("div",{className:"flex-1 p-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5 text-purple-600",children:[e.jsx(H,{size:14,strokeWidth:2.5}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Impact (å½±éŸ¿)"})]}),e.jsx("p",{className:"text-xs text-slate-700 leading-relaxed",children:t.impact})]})]})})}),a=((d=s.detailedReview)==null?void 0:d.filter(t=>t.fallacy&&t.fallacy.toLowerCase()!=="null"&&t.fallacy.trim()!==""||t.score!==void 0&&t.score<7).sort((t,c)=>t.messageIndex-c.messageIndex))||[],N=((p=s.detailedReview)==null?void 0:p.filter(t=>o==="HIGH"?(t.score??0)>=8:o==="LOW"?(t.score??0)>0&&(t.score??0)<=6:o==="FALLACY"?t.fallacy&&t.fallacy!=="null":!0))||[];return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[!h&&s.detailedReview&&e.jsx(Ne,{reviews:s.detailedReview,messages:i,onPointClick:u}),a.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 text-slate-800 font-bold text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{size:16,className:"text-red-500"}),e.jsx("span",{children:"é‡è¦ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ"})]}),e.jsx("span",{className:"text-xs font-normal text-slate-400",children:"ã‚¿ãƒƒãƒ—ã—ã¦ç§»å‹•"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide snap-x",children:a.map((t,c)=>{var w;const m=((w=i[t.messageIndex])==null?void 0:w.role)==="user",y=t.fallacy&&t.fallacy.toLowerCase()!=="null";return e.jsxs("button",{onClick:()=>u(t.messageIndex),className:`shrink-0 px-3 py-2 rounded-lg text-xs font-bold border flex flex-col items-start gap-1 transition-all hover:shadow-md active:scale-95 min-w-[140px] snap-start text-left ${y?m?"bg-amber-50 text-amber-800 border-amber-200":"bg-purple-50 text-purple-800 border-purple-200":"bg-blue-50 text-blue-800 border-blue-200"}`,children:[e.jsxs("span",{className:"opacity-60 text-[10px] uppercase flex items-center gap-1",children:[m?e.jsx(A,{size:10}):e.jsx(B,{size:10}),"#",t.messageIndex+1]}),e.jsx("span",{className:"truncate max-w-full font-bold",children:y?`âš ï¸ ${t.fallacy}`:`â­ ã‚¹ã‚³ã‚¢: ${t.score}/10`})]},c)})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6 border-b border-slate-100 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-slate-800",children:[e.jsx(L,{size:20,className:"text-blue-500"}),e.jsx("h3",{className:"font-bold",children:"è©³ç´°ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆSBIãƒ¢ãƒ‡ãƒ«åˆ†æžï¼‰"})]}),e.jsx("div",{className:"flex gap-2 bg-slate-100 p-1 rounded-lg",children:[{key:"ALL",label:"å…¨ã¦"},{key:"HIGH",label:"é«˜è©•ä¾¡ (8+)"},{key:"LOW",label:"è¦æ”¹å–„ (6-)"},{key:"FALLACY",label:"è©­å¼"}].map(t=>e.jsx("button",{onClick:()=>b(t.key),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${o===t.key?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:t.label},t.key))})]}),e.jsx("div",{className:"space-y-4",children:N.length===0?e.jsxs("div",{className:"text-center py-8 text-slate-400",children:[e.jsx(X,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"è©²å½“ã™ã‚‹ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ã‚ã‚Šã¾ã›ã‚“"})]}):N.map((t,c)=>{const m=i[t.messageIndex];if(!m)return null;const y=m.role==="user",w=n.has(t.messageIndex),C=v(m.text||"");return e.jsxs("div",{ref:M=>{f.current[t.messageIndex]=M},className:`rounded-xl border transition-all duration-300 ${w?"bg-white shadow-md border-blue-200":"bg-slate-50 border-slate-200 hover:border-blue-200"}`,children:[e.jsxs("button",{onClick:()=>j(t.messageIndex),className:"w-full flex items-center justify-between p-4 text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("span",{className:`shrink-0 w-8 h-8 flex items-center justify-center rounded-full text-white ${y?"bg-blue-600":"bg-emerald-600"}`,children:y?e.jsx(A,{size:16}):e.jsx(B,{size:16})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsxs("span",{className:"text-xs uppercase font-bold text-slate-400",children:["Message #",t.messageIndex+1]}),e.jsxs("span",{className:"truncate text-sm font-medium text-slate-700 max-w-[200px] sm:max-w-md",children:[C.substring(0,50),"..."]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[t.fallacy&&t.fallacy!=="null"&&e.jsxs("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded text-[10px] font-bold flex items-center gap-1",children:[e.jsx(S,{size:12})," ",t.fallacy]}),t.score!==void 0&&e.jsxs("div",{className:`flex flex-col items-end ${r(t.score*10).split(" ")[0]}`,children:[e.jsx("span",{className:"text-lg font-bold leading-none",children:t.score}),e.jsx("span",{className:"text-[10px]",children:"SCORE"})]}),w?e.jsx(F,{size:20,className:"text-slate-400"}):e.jsx(Q,{size:20,className:"text-slate-400"})]})]}),w&&e.jsxs("div",{className:"px-4 pb-4 border-t border-slate-100 pt-4 animate-fade-in",children:[e.jsx("div",{className:"mb-4 bg-slate-50 p-3 rounded-lg border border-slate-200/50 text-sm leading-relaxed text-slate-600",children:g(m.text,t.fallacyQuote,y)}),y&&P(m)&&e.jsx("div",{className:"mb-4",children:e.jsx(J,{score:m.structureAnalysis,variant:"detailed"})}),e.jsxs("div",{className:"grid gap-3",children:[t.sbi?e.jsx(l,{sbi:t.sbi}):e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 block mb-1",children:"è©•ä¾¡ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆ"}),e.jsx("p",{className:"text-sm text-slate-800",children:t.critique})]}),t.fallacyExplanation&&e.jsxs("div",{className:"bg-amber-50 p-3 rounded-lg border border-amber-100 mt-2",children:[e.jsxs("span",{className:"text-xs font-bold text-amber-700 block mb-1 flex items-center gap-1",children:[e.jsx(S,{size:12})," æ¤œå‡ºã•ã‚ŒãŸå•é¡Œç‚¹"]}),e.jsx("p",{className:"text-sm text-amber-900",children:t.fallacyExplanation})]}),t.betterResponse&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100 mt-2",children:[e.jsxs("span",{className:"text-xs font-bold text-blue-700 block mb-1 flex items-center gap-1",children:[e.jsx(z,{size:12})," æ”¹å–„ä¾‹ãƒ»æ¨¡ç¯„è§£ç­”"]}),e.jsxs("p",{className:"text-sm text-blue-900 italic",children:['"',t.betterResponse,'"']})]})]})]})]},c)})})]})]})},ve=({demo:s})=>e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-sky-700",children:[e.jsx("div",{className:"p-2 bg-sky-100 rounded-lg",children:e.jsx(ee,{size:24})}),e.jsx("h2",{className:"text-xl font-bold",children:"æ¨¡ç¯„ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆåˆ†æž"})]}),e.jsx("p",{className:"text-slate-700 leading-relaxed",children:s.summary})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"p-2 bg-slate-100 rounded-lg text-slate-600",children:e.jsx(W,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800",children:"è«–ç†æ§‹é€ ã®å¯è¦–åŒ– (Logic & Clash Map)"}),e.jsx("p",{className:"text-xs text-slate-500",children:"è­°è«–ã®è¡çªã‚’ã€ŒToulminãƒ¢ãƒ‡ãƒ«ã€ã§å®Œå…¨æ§‹é€ åŒ–"})]})]}),e.jsxs("div",{className:"mb-4 text-center",children:[e.jsx("span",{className:"text-xs font-bold uppercase text-slate-400",children:"Current Agenda"}),e.jsx("p",{className:"font-bold text-slate-800 text-lg",children:s.clashAnalysis.agenda})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-stretch relative",children:[e.jsxs("div",{className:"flex-1 p-5 rounded-2xl border-2 border-indigo-100 bg-white relative hover:border-indigo-300 transition-colors",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-indigo-500 rounded-t-xl"}),e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsx("span",{className:"font-bold text-indigo-800 text-sm bg-indigo-50 px-3 py-1 rounded-full",children:"PRO (è‚¯å®šå´)"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(R,{size:14,className:"text-indigo-500"}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-500",children:"Claim (ä¸»å¼µ)"})]}),e.jsx("p",{className:"text-sm text-slate-900 font-bold bg-indigo-50/50 p-2 rounded-lg",children:s.clashAnalysis.pro.claim})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(L,{size:14,className:"text-indigo-400"}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-500",children:"Data (æ ¹æ‹ )"})]}),e.jsx("p",{className:"text-xs text-slate-600 bg-slate-50 p-2 rounded-lg border border-slate-100 h-full",children:s.clashAnalysis.pro.data})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx($,{size:14,className:"text-indigo-400"}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-500",children:"Warrant (è«–æ‹ )"})]}),e.jsx("p",{className:"text-xs text-slate-600 bg-slate-50 p-2 rounded-lg border border-slate-100 h-full",children:s.clashAnalysis.pro.warrant})]})]})]})]}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white rounded-full p-2 border-4 border-slate-100 shadow-sm z-10 hidden md:flex items-center justify-center w-12 h-12",children:e.jsx(W,{size:20,className:"text-slate-400"})}),e.jsxs("div",{className:"flex-1 p-5 rounded-2xl border-2 border-rose-100 bg-white relative hover:border-rose-300 transition-colors",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-rose-500 rounded-t-xl"}),e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsx("span",{className:"font-bold text-rose-800 text-sm bg-rose-50 px-3 py-1 rounded-full",children:"CON (å¦å®šå´)"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(se,{size:14,className:"text-rose-500"}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-500",children:"Counter (åè«–)"})]}),e.jsx("p",{className:"text-sm text-slate-900 font-bold bg-rose-50/50 p-2 rounded-lg",children:s.clashAnalysis.con.counter})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(L,{size:14,className:"text-rose-400"}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-500",children:"Evidence (è¨¼æ‹ )"})]}),e.jsx("p",{className:"text-xs text-slate-600 bg-slate-50 p-2 rounded-lg border border-slate-100 h-full",children:s.clashAnalysis.con.evidence})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(S,{size:14,className:"text-rose-400"}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-500",children:"Impact (é‡è¦æ€§)"})]}),e.jsx("p",{className:"text-xs text-slate-600 bg-slate-50 p-2 rounded-lg border border-slate-100 h-full",children:s.clashAnalysis.con.impact})]})]})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-slate-50 to-white rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 font-bold text-slate-700 text-sm",children:[e.jsx(_,{size:16})," è­°è«–ã®è¡çªãƒ»åˆ¤å®š (Synthesis)"]}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed font-medium",children:s.clashAnalysis.synthesis})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-purple-700",children:[e.jsx(z,{size:20}),e.jsx("h3",{className:"font-bold",children:"æŠ€æ³•ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ (Strategy Highlights)"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:s.highlights.map((i,h)=>e.jsxs("div",{className:"flex flex-col p-4 rounded-xl bg-purple-50/50 border border-purple-100 hover:bg-purple-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"bg-white p-1.5 rounded-lg text-purple-500 shadow-sm border border-purple-100",children:e.jsx(H,{size:16})}),e.jsx("h4",{className:"font-bold text-purple-900 text-sm leading-tight",children:i.technique})]}),e.jsx("p",{className:"text-xs text-slate-600 mb-3 flex-1 leading-relaxed",children:i.description}),e.jsxs("div",{className:"text-[10px] text-purple-700 font-bold border-t border-purple-100 pt-2 mt-auto",children:["åŠ¹æžœ: ",i.effect]})]},h))})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-emerald-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-emerald-700",children:[e.jsx(E,{size:20}),e.jsx("h3",{className:"font-bold",children:"è¦³å¯Ÿè€…ã¨ã—ã¦ã®å­¦ã³ (Observer Learning Points)"})]}),e.jsx("div",{className:"space-y-3",children:s.learningPoints.map((i,h)=>e.jsxs("div",{className:"flex gap-4 p-4 rounded-xl bg-emerald-50/50 border border-emerald-100",children:[e.jsx("div",{className:"shrink-0 w-8 h-8 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center font-bold text-sm shadow-sm border border-emerald-200",children:h+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-1",children:i.point}),e.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:i.reason})]})]},h))})]})]}),ye=({facilitation:s})=>{const i=h=>h>10?(h/10).toFixed(1):h;return e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-green-200 animate-fade-in mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-lg text-green-600",children:e.jsx(te,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"ãƒ•ã‚¡ã‚·ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³åˆ†æž"}),e.jsx("p",{className:"text-xs text-slate-500",children:"åˆæ„å½¢æˆï¼ˆã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ï¼‰ã«å‘ã‘ãŸé€²è¡Œã®è©•ä¾¡"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-700",children:[e.jsx("span",{children:"ç†è§£ãƒ»å…±æ„Ÿ"}),e.jsxs("span",{className:"text-green-600",children:[i(s.understandingScore),"/10"]})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500",style:{width:`${Math.min(s.understandingScore>10?s.understandingScore:s.understandingScore*10,100)}%`}})}),e.jsx("p",{className:"text-xs text-slate-500",children:"åŒæ–¹ã®æ„è¦‹ã‚’æ­£ã—ãç†è§£ã—ã€å—ã‘æ­¢ã‚ã‚‰ã‚ŒãŸã‹"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-700",children:[e.jsx("span",{children:"è­°è«–ã®æ•´ç†"}),e.jsxs("span",{className:"text-blue-600",children:[i(s.organizingScore),"/10"]})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500",style:{width:`${Math.min(s.organizingScore>10?s.organizingScore:s.organizingScore*10,100)}%`}})}),e.jsx("p",{className:"text-xs text-slate-500",children:"è«–ç‚¹ã‚’æ˜Žç¢ºã«ã—ã€æ§‹é€ åŒ–ã§ããŸã‹"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-700",children:[e.jsx("span",{children:"åˆæ„å½¢æˆ"}),e.jsxs("span",{className:"text-amber-600",children:[i(s.consensusScore),"/10"]})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500",style:{width:`${Math.min(s.consensusScore>10?s.consensusScore:s.consensusScore*10,100)}%`}})}),e.jsx("p",{className:"text-xs text-slate-500",children:"å¯¾ç«‹ã‚’ä¹—ã‚Šè¶Šãˆã€çµè«–ã¸å°Žã‘ãŸã‹"})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100 text-green-900 leading-relaxed text-sm",children:[e.jsxs("span",{className:"font-bold block mb-2 flex items-center gap-2",children:[e.jsx(I,{size:16})," ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯"]}),s.feedback]})]})},we=({story:s})=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-teal-200 animate-fade-in mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-teal-100 p-2 rounded-lg text-teal-600",children:e.jsx(le,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"ã‚¹ãƒˆãƒ¼ãƒªãƒ¼åˆ†æž"}),e.jsx("p",{className:"text-xs text-slate-500",children:"æ„æ€æ±ºå®šã®è³ªã¨ã€ãã‚ŒãŒä¸–ç•Œã«ä¸ŽãˆãŸå½±éŸ¿ã®è©•ä¾¡"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-4 bg-slate-50 rounded-xl border border-slate-100",children:[e.jsx("span",{className:"text-xs font-bold uppercase text-slate-500 tracking-wider mb-2",children:"æ±ºå®šã®å¦¥å½“æ€§"}),e.jsx("span",{className:"text-4xl font-bold text-teal-600",children:s.decisionScore})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-4 bg-slate-50 rounded-xl border border-slate-100",children:[e.jsx("span",{className:"text-xs font-bold uppercase text-slate-500 tracking-wider mb-2",children:"é–¢ä¿‚è€…ã®ç´å¾—åº¦"}),e.jsx("span",{className:"text-4xl font-bold text-blue-600",children:s.consensusScore})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-teal-50 p-4 rounded-xl border border-teal-100",children:[e.jsxs("h4",{className:"flex items-center gap-2 font-bold text-teal-800 mb-2",children:[e.jsx(U,{size:18})," ç‰©èªžã®çµæœ« (Outcome)"]}),e.jsx("p",{className:"text-sm text-teal-900 leading-relaxed",children:s.outcome})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-700 mb-3 border-b border-slate-100 pb-2",children:"ç¤¾ä¼šçš„å½±éŸ¿è©•ä¾¡"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg text-xs leading-relaxed border border-slate-100",children:[e.jsx("span",{className:"font-bold block mb-1 text-slate-500",children:"çµŒæ¸ˆ"}),s.socialImpact.economic]}),e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg text-xs leading-relaxed border border-slate-100",children:[e.jsx("span",{className:"font-bold block mb-1 text-slate-500",children:"ä¸–è«–"}),s.socialImpact.publicSentiment]}),e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg text-xs leading-relaxed border border-slate-100",children:[e.jsx("span",{className:"font-bold block mb-1 text-slate-500",children:"å€«ç†"}),s.socialImpact.ethical]})]})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl border border-indigo-100 border-dashed",children:[e.jsxs("h4",{className:"flex items-center gap-2 font-bold text-indigo-800 mb-2 text-sm",children:[e.jsx(R,{size:16})," IFã‚·ãƒŠãƒªã‚ª: ã‚‚ã—åˆ¥ã®é¸æŠžã‚’ã—ã¦ã„ãŸã‚‰..."]}),e.jsxs("p",{className:"text-sm text-indigo-900 leading-relaxed italic",children:['"',s.alternativeScenario,'"']})]})]})]}),ke=({metrics:s,overallScore:i=0})=>{const o=[{key:"logic",label:"è«–ç†æ€§"},{key:"evidence",label:"æ ¹æ‹ "},{key:"rebuttal",label:"åè«–åŠ›"},{key:"persuasion",label:"èª¬å¾—åŠ›"},{key:"consistency",label:"ä¸€è²«æ€§"},{key:"constructiveness",label:"å»ºè¨­æ€§"},{key:"objectivity",label:"å®¢è¦³æ€§"},{key:"clarity",label:"æ˜Žçž­æ€§"}],b=(d,p,t=10)=>{const c=Math.PI*2*p/o.length-Math.PI/2,m=d/t*90;return{x:160+m*Math.cos(c),y:160+m*Math.sin(c)}},f=d=>d>=8?"#2563eb":d>=5?"#059669":"#dc2626",j=d=>d>=80?{stroke:"#059669",fill:"rgba(5, 150, 105, 0.2)"}:d>=60?{stroke:"#2563eb",fill:"rgba(37, 99, 235, 0.2)"}:{stroke:"#d97706",fill:"rgba(217, 119, 6, 0.2)"},{stroke:u,fill:v}=j(i),r=o.map((d,p)=>{const t=s[d.key]||0;return b(t,p)}),g=r.map((d,p)=>p===0?`M ${d.x},${d.y}`:`L ${d.x},${d.y}`).join(" ")+" Z",l=[2,4,6,8,10],a=d=>d===0||d===4?"middle":d>0&&d<4?"start":"end",N=d=>d===2||d===6?"middle":d>2&&d<6?"hanging":"auto";return e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 flex flex-col items-center animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 text-slate-800 self-start",children:[e.jsx(ae,{size:24,className:"text-blue-600"}),e.jsx("h3",{className:"text-lg font-bold",children:"è©³ç´°è©•ä¾¡ã‚¹ã‚³ã‚¢"})]}),e.jsx("div",{className:"relative w-full flex justify-center overflow-hidden",children:e.jsxs("svg",{width:320,height:320,viewBox:"0 0 320 320",className:"max-w-full h-auto",children:[l.map((d,p)=>{const t=o.map((c,m)=>{const{x:y,y:w}=b(d,m);return`${y},${w}`}).join(" ");return e.jsx("polygon",{points:t,fill:p%2===0?"#f8fafc":"#ffffff",stroke:"#e2e8f0",strokeWidth:"1"},d)}),o.map((d,p)=>{const t=b(0,p),c=b(10,p);return e.jsx("line",{x1:t.x,y1:t.y,x2:c.x,y2:c.y,stroke:"#e2e8f0",strokeDasharray:"4 4"},p)}),e.jsx("path",{d:g,fill:v,stroke:u,strokeWidth:"2.5",className:"drop-shadow-sm transition-all duration-500"}),r.map((d,p)=>{const t=s[o[p].key]||0;return e.jsx("circle",{cx:d.x,cy:d.y,r:"4",fill:f(t),stroke:"#ffffff",strokeWidth:"2",className:"transition-all duration-500"},p)}),o.map((d,p)=>{const t=s[d.key]||0,{x:c,y:m}=b(12.5,p);return e.jsxs("g",{children:[e.jsx("text",{x:c,y:m,textAnchor:a(p),dominantBaseline:N(p),className:"font-bold fill-slate-700 text-[11px] sm:text-[12px]",children:d.label}),e.jsxs("text",{x:c,y:m+14,textAnchor:a(p),dominantBaseline:N(p),className:"font-bold text-[10px]",fill:f(t),children:[t,"/10"]})]},p)})]})}),e.jsxs("div",{className:"flex gap-4 mt-2 text-[10px] font-medium text-slate-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"}),"8-10: å„ªç§€"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-600"}),"5-7: æ¨™æº–"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-600"}),"0-4: æ”¹å–„"]})]})]})},Se=({rhetoric:s})=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 mt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 text-slate-800",children:[e.jsx(re,{size:24,className:"text-pink-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"èª¬å¾—åŠ›ãƒ»å¿ƒç†åˆ†æž (Rhetoric & Psychology)"}),e.jsx("p",{className:"text-xs text-slate-500",children:"ã‚¢ãƒªã‚¹ãƒˆãƒ†ãƒ¬ã‚¹ã®å¼è«–è¡“ã¨å¿ƒç†çš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã‚ˆã‚‹è©•ä¾¡"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-700",children:[e.jsx("span",{children:"Ethos (ä¿¡é ¼æ€§)"}),e.jsxs("span",{className:"text-indigo-600",children:[s.ethos,"/10"]})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500",style:{width:`${s.ethos*10}%`}})}),e.jsx("p",{className:"text-xs text-slate-500",children:"çŸ¥çš„æ­£ç›´ã•ã¨èª å®Ÿã•ã®å°è±¡"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-700",children:[e.jsx("span",{children:"Pathos (æ„Ÿæƒ…)"}),e.jsxs("span",{className:"text-pink-600",children:[s.pathos,"/10"]})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-pink-500",style:{width:`${s.pathos*10}%`}})}),e.jsx("p",{className:"text-xs text-slate-500",children:"å…±æ„Ÿã‚„ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ†ãƒªãƒ³ã‚°ã®æ´»ç”¨"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-700",children:[e.jsx("span",{children:"Logos (è«–ç†)"}),e.jsxs("span",{className:"text-blue-600",children:[s.logos,"/10"]})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500",style:{width:`${s.logos*10}%`}})}),e.jsx("p",{className:"text-xs text-slate-500",children:"è«–ç†çš„æ•´åˆæ€§ã¨è¨¼æ‹ ã®å¼·ã•"})]})]}),e.jsx("div",{className:"border-t border-slate-100 pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl shrink-0 ${s.affirmationScore>=7?"bg-emerald-100 text-emerald-600":"bg-amber-100 text-amber-600"}`,children:e.jsx(T,{size:24})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:"è‚¯å®šã‹ã‚‰å…¥ã‚‹æŠ€è¡“ (Yes-And/Yes-But)"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`text-xl font-bold ${s.affirmationScore>=7?"text-emerald-600":"text-amber-600"}`,children:[s.affirmationScore,"/10"]}),e.jsx("span",{className:"text-xs bg-slate-100 px-2 py-0.5 rounded text-slate-500 font-medium",children:"Communication Style"})]}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed bg-slate-50 p-3 rounded-lg border border-slate-100",children:s.affirmationComment})]})]})})]}),Le=({feedback:s,tokenUsage:i,isArchiveView:h,onNavigate:n})=>{const[x,o]=k.useState(!1),b=s.facilitation&&s.facilitation.understandingScore>0,f=s.storyAnalysis&&s.storyAnalysis.decisionScore>0,j=!!s.demoAnalysis,u=r=>r>=80?"text-emerald-600 bg-emerald-50 border-emerald-200":r>=60?"text-blue-600 bg-blue-50 border-blue-200":"text-amber-600 bg-amber-50 border-amber-200",v=({rec:r})=>{let g=I,l="bg-slate-800 text-white hover:bg-slate-900";switch(r.actionType){case"start_drill":g=he,l="bg-orange-600 text-white hover:bg-orange-700";break;case"open_textbook":case"start_study":g=E,l="bg-purple-600 text-white hover:bg-purple-700";break;case"open_thinking_gym":g=me,l="bg-indigo-600 text-white hover:bg-indigo-700";break;case"open_minigame":g=oe,l="bg-pink-600 text-white hover:bg-pink-700";break}return e.jsxs("button",{onClick:()=>n(r),className:`w-full flex items-center justify-between p-3 rounded-xl shadow-sm transition-all active:scale-95 ${l}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:e.jsx(g,{size:18})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-xs font-medium opacity-90 uppercase tracking-wide",children:"Recommended Training"}),e.jsx("div",{className:"font-bold text-sm",children:r.label})]})]}),e.jsx(G,{size:18,className:"opacity-80"})]})};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[j&&s.demoAnalysis?e.jsx(ve,{demo:s.demoAnalysis}):e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-slate-200 text-center relative overflow-hidden",children:[h&&e.jsxs("div",{className:"absolute top-4 left-4 bg-slate-100 text-slate-500 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(de,{size:12}),e.jsx("span",{children:"Archive Mode"})]}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:"è­°è«–ã®åˆ†æžçµæžœ"}),e.jsx("div",{className:"flex flex-col items-center justify-center",children:e.jsxs("div",{className:`relative w-40 h-40 rounded-full flex flex-col items-center justify-center border-4 ${u(s.score)} mb-4`,children:[e.jsx("span",{className:"text-sm font-semibold uppercase tracking-wider opacity-70",children:"Score"}),e.jsx("span",{className:"text-5xl font-bold",children:s.score})]})}),e.jsx("p",{className:"text-slate-600 leading-relaxed max-w-xl mx-auto",children:s.summary}),i&&e.jsxs("div",{className:"absolute top-4 right-4 flex flex-col items-end text-xs text-slate-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{size:14}),e.jsx("span",{children:"Total Tokens"})]}),e.jsx("span",{className:"font-mono font-medium text-slate-500",children:i.totalTokens.toLocaleString()})]})]}),!j&&s.rubricDetails&&s.rubricDetails.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-fade-in",children:[e.jsxs("button",{onClick:()=>o(!x),className:"w-full flex items-center justify-between p-5 bg-slate-50 hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg text-blue-600",children:e.jsx(ie,{size:20})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-bold text-slate-800 text-base",children:"åˆ†æžçš„ãƒ«ãƒ¼ãƒ–ãƒªãƒƒã‚¯ (Analytical Rubric)"}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-widest",children:"Weighting & Performance Levels"})]})]}),x?e.jsx(F,{size:20,className:"text-slate-400"}):e.jsx(Q,{size:20,className:"text-slate-400"})]}),x&&e.jsxs("div",{className:"p-6 space-y-6 animate-fade-in",children:[e.jsx("div",{className:"bg-blue-50/50 p-4 rounded-xl border border-blue-100 text-xs text-blue-700 leading-relaxed",children:"å„è©•ä¾¡é …ç›®ã®ã€Œé‡ã¿ä»˜ã‘ï¼ˆWeightï¼‰ã€ã¨ã€ã‚¹ã‚³ã‚¢ã«å¯¾å¿œã™ã‚‹å…·ä½“çš„ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹çŠ¶æ…‹ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚ é€æ˜Žæ€§ã®é«˜ã„è©•ä¾¡åŸºæº–ã«åŸºã¥ãã€ã©ã“ã‚’é‡ç‚¹çš„ã«æ”¹å–„ã™ã¹ãã‹ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚"}),e.jsx("div",{className:"grid gap-4",children:s.rubricDetails.map(r=>e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 p-4 rounded-xl border border-slate-100 bg-white hover:border-blue-200 transition-colors",children:[e.jsxs("div",{className:"sm:w-1/3 shrink-0",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:r.label}),e.jsxs("span",{className:"text-[10px] font-bold text-slate-400",children:["Weight: ",r.weight,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${r.score>=8?"bg-blue-600":r.score>=5?"bg-emerald-500":"bg-amber-500"}`,style:{width:`${r.score*10}%`}})}),e.jsxs("span",{className:"font-bold text-sm text-slate-700 w-8 text-right",children:[r.score,"/10"]})]})]}),e.jsxs("div",{className:"flex-1 bg-slate-50 p-3 rounded-lg border border-slate-100",children:[e.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase block mb-1",children:"Performance Descriptor"}),e.jsx("p",{className:"text-xs text-slate-600 leading-relaxed font-medium",children:r.descriptor})]})]},r.key))})]})]}),s.trainingRecommendations&&s.trainingRecommendations.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.trainingRecommendations.map(r=>e.jsx(v,{rec:r},r.id))}),!j&&s.sessionMetrics&&s.sessionMetrics.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-slate-700 border-b border-slate-100 pb-2",children:[e.jsx(ce,{size:20}),e.jsx("h3",{className:"text-lg font-bold",children:"è¡Œå‹•ãƒ¡ãƒˆãƒªã‚¯ã‚¹ (Behavior Stats)"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:s.sessionMetrics.map(r=>e.jsxs("div",{className:"flex flex-col p-3 rounded-xl bg-slate-50 border border-slate-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500",children:r.label}),e.jsxs("span",{className:"text-sm font-mono font-bold text-slate-700",children:[r.rate.numerator," / ",r.rate.denominator]})]}),e.jsx("div",{className:"w-full bg-slate-200 h-1.5 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${r.score>=80?"bg-emerald-500":r.score>=50?"bg-blue-500":"bg-amber-500"}`,style:{width:`${r.rate.denominator>0?r.rate.numerator/r.rate.denominator*100:0}%`}})})]},r.key))})]}),b&&s.facilitation&&e.jsx(ye,{facilitation:s.facilitation}),f&&s.storyAnalysis&&e.jsx(we,{story:s.storyAnalysis}),!b&&!f&&!j&&s.metrics&&e.jsx(ke,{metrics:s.metrics,overallScore:s.score}),!b&&!f&&!j&&s.rhetoric&&e.jsx(Se,{rhetoric:s.rhetoric}),!j&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-emerald-600",children:[e.jsx(xe,{size:24}),e.jsx("h3",{className:"text-lg font-bold",children:"è‰¯ã‹ã£ãŸç‚¹"})]}),e.jsx("ul",{className:"space-y-3",children:s.strengths.map((r,g)=>e.jsxs("li",{className:"flex gap-3 text-slate-700",children:[e.jsx("span",{className:"shrink-0 w-1.5 h-1.5 rounded-full bg-emerald-400 mt-2"}),e.jsx("span",{children:r})]},g))})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-amber-600",children:[e.jsx(S,{size:24}),e.jsx("h3",{className:"text-lg font-bold",children:"æ”¹å–„ç‚¹"})]}),e.jsx("ul",{className:"space-y-3",children:s.weaknesses.map((r,g)=>e.jsxs("li",{className:"flex gap-3 text-slate-700",children:[e.jsx("span",{className:"shrink-0 w-1.5 h-1.5 rounded-full bg-amber-400 mt-2"}),e.jsx("span",{children:r})]},g))})]})]}),!j&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-blue-200 bg-blue-50/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-700",children:[e.jsx(I,{size:24}),e.jsx("h3",{className:"text-lg font-bold",children:"ä»Šå¾Œã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹"})]}),e.jsx("p",{className:"text-slate-700 leading-relaxed",children:s.advice})]})]})},ze=({structure:s})=>{const i=n=>{switch(n){case"strong":return"bg-emerald-50 border-emerald-200 text-emerald-800";case"weak":return"bg-amber-50 border-amber-200 text-amber-800 border-dashed";case"missing":return"bg-red-50 border-red-200 text-red-800 border-dashed";default:return"bg-slate-50 border-slate-200"}},h=({title:n,el:x})=>e.jsxs("div",{className:`p-3 rounded-lg border ${i(x.status)} flex-1 flex flex-col relative min-h-[100px]`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider opacity-70",children:n}),x.status==="missing"&&e.jsx("span",{className:"text-[10px] font-bold bg-white/50 px-1.5 rounded",children:"æ¬ è½"}),x.status==="weak"&&e.jsx("span",{className:"text-[10px] font-bold bg-white/50 px-1.5 rounded",children:"å¼±ã„"})]}),e.jsx("p",{className:"text-sm font-medium leading-snug flex-1",children:x.text||e.jsx("span",{className:"italic opacity-50",children:"ï¼ˆè¨˜è¿°ãªã—ï¼‰"})}),x.comment&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-black/10 text-xs opacity-90",children:["ðŸ’¡ ",x.comment]})]});return e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.type==="best"?e.jsxs("span",{className:"bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded text-xs font-bold flex items-center gap-1",children:[e.jsx(be,{size:12})," BEST ARGUMENT"]}):e.jsxs("span",{className:"bg-amber-100 text-amber-700 px-2 py-0.5 rounded text-xs font-bold flex items-center gap-1",children:[e.jsx(S,{size:12})," NEEDS IMPROVEMENT"]}),e.jsx("h4",{className:"font-bold text-slate-700 text-sm truncate flex-1",children:s.summary})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 relative",children:[e.jsx(h,{title:"Dataï¼ˆäº‹å®Ÿãƒ»æ ¹æ‹ ï¼‰",el:s.data}),e.jsx("div",{className:"hidden md:flex flex-col items-center justify-center text-slate-400 z-10",children:e.jsx(G,{size:20})}),e.jsx(h,{title:"Warrantï¼ˆè«–æ‹ ãƒ»ã¤ãªãŽï¼‰",el:s.warrant})]}),e.jsxs("div",{className:"flex items-center justify-center text-slate-400 -my-2 z-0 relative",children:[e.jsx(pe,{size:20}),e.jsx("div",{className:"absolute top-1/2 left-1/4 right-1/4 h-px bg-slate-200 -z-10 hidden md:block"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:`w-full md:w-2/3 p-4 rounded-xl border ${i(s.claim.status)} text-center`,children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider opacity-70 block mb-1",children:"Claimï¼ˆä¸»å¼µãƒ»çµè«–ï¼‰"}),e.jsx("p",{className:"text-base font-bold",children:s.claim.text}),s.claim.comment&&e.jsx("p",{className:"mt-1 text-xs opacity-80",children:s.claim.comment})]})})]})]})},Re=({logicAnalysis:s,messages:i=[]})=>{const h=i.filter(n=>n.role==="user"&&P(n)).map(n=>n.structureAnalysis);return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"bg-blue-50 p-6 rounded-2xl border border-blue-100 text-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-lg mb-2",children:[e.jsx($,{size:24}),e.jsx("h3",{children:"è«–ç†æ§‹é€ ã¨å¦¥å½“æ€§ã®è©³ç´°åˆ†æž"})]}),e.jsx("p",{className:"text-sm opacity-90 leading-relaxed font-medium",children:"ã€Œä¸»å¼µã®åž‹ï¼ˆToulminï¼‰ã€ã ã‘ã§ãªãã€ã©ã®ã‚ˆã†ãªã€Œè­°è«–ã‚¹ã‚­ãƒ¼ãƒ ï¼ˆWaltonï¼‰ã€ã‚’ç”¨ã„ã¦èª¬å¾—ã‚’è©¦ã¿ãŸã‹ã€ ãã—ã¦ãã®è«–ç†ã®ç©´ã‚’æ¤œè¨¼ã™ã‚‹ã€Œæ‰¹åˆ¤çš„è³ªå•ï¼ˆCQï¼‰ã€ã¸ã®å¯¾å¿œåº¦ã‚’å¯è¦–åŒ–ã—ã¦ã„ã¾ã™ã€‚"})]}),h.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-50 px-5 py-4 border-b border-slate-100 flex items-center gap-2",children:[e.jsx(je,{size:20,className:"text-indigo-500"}),e.jsx("h4",{className:"font-bold text-slate-800",children:"æŽ¡ç”¨ã•ã‚ŒãŸè­°è«–ã‚¹ã‚­ãƒ¼ãƒ ã¨è«–ç†ã®ç©´"})]}),e.jsx("div",{className:"divide-y divide-slate-100",children:h.map((n,x)=>{var o,b,f;return e.jsx("div",{className:"p-5 hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"md:w-1/2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:["Message #",x+1]}),n.scheme&&e.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:n.scheme.label})]}),e.jsxs("p",{className:"text-sm text-slate-700 font-medium line-clamp-3 mb-3 italic",children:['"',(o=i.find(j=>j.id===n.messageId))==null?void 0:o.text,'"']}),e.jsxs("div",{className:"text-xs text-slate-500 bg-white border border-slate-200 p-3 rounded-xl shadow-sm",children:[e.jsx("span",{className:"font-black text-slate-400 block mb-1 uppercase text-[9px]",children:"Scheme Detail"}),(b=n.scheme)==null?void 0:b.description]})]}),e.jsxs("div",{className:"md:w-1/2",children:[e.jsxs("h5",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-1",children:[e.jsx(Y,{size:12})," Critical Questions Check"]}),e.jsx("div",{className:"space-y-2",children:(f=n.criticalQuestions)==null?void 0:f.map((j,u)=>e.jsxs("div",{className:"flex gap-2",children:[j.isAddressed?e.jsx(T,{size:14,className:"text-emerald-500 mt-0.5 shrink-0"}):e.jsx(ge,{size:14,className:"text-rose-500 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-bold ${j.isAddressed?"text-emerald-700":"text-rose-700"}`,children:j.question}),!j.isAddressed&&e.jsx("p",{className:"text-[10px] text-slate-500 leading-tight mt-0.5",children:j.aiComment})]})]},u))})]})]})},x)})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-black text-slate-400 text-xs uppercase tracking-[0.2em] flex items-center gap-2 px-1",children:[e.jsx($,{size:16})," Toulmin Model Visualizations"]}),s&&s.length>0?s.map((n,x)=>e.jsx(ze,{structure:n},x)):e.jsxs("div",{className:"text-center py-10 bg-white rounded-2xl border border-dashed border-slate-300 text-slate-400",children:[e.jsx($,{size:32,className:"mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm font-medium",children:"åŸºæœ¬æ§‹é€ åˆ†æžãƒ‡ãƒ¼ã‚¿ãŒä¸è¶³ã—ã¦ã„ã¾ã™"})]})]})]})},Ce=({stats:s,details:i})=>{const h=Math.min(Math.max(s.score,0),10);return e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-violet-100 p-2 rounded-lg text-violet-600",children:e.jsx(fe,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"è³ªå•åŠ›åˆ†æž (Questioning Skills)"}),e.jsx("p",{className:"text-xs text-slate-500",children:"ç›¸æ‰‹ã®æ€è€ƒã‚’æ·±ã‚ã€è­°è«–ã‚’å±•é–‹ã•ã›ã‚‹è³ªå•ã®è³ªã‚’è©•ä¾¡"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-violet-50 rounded-xl p-5 border border-violet-100 flex flex-col items-center justify-center text-center",children:[e.jsx("span",{className:"text-xs font-bold uppercase text-violet-600 tracking-wider mb-2",children:"Questioning Score"}),e.jsxs("span",{className:"text-4xl font-bold text-slate-800 mb-2",children:[h,"/10"]}),e.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((n,x)=>e.jsx("div",{className:`w-2 h-2 rounded-full ${x<h/2?"bg-violet-500":"bg-violet-200"}`},x))})]}),e.jsxs("div",{className:"lg:col-span-2 grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-slate-50 border border-slate-200 p-3 rounded-xl flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600 mb-1",children:s.openCount}),e.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Open"}),e.jsx("span",{className:"text-[9px] text-slate-400",children:"æ€è€ƒã‚’åºƒã’ã‚‹"})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 p-3 rounded-xl flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-2xl font-bold text-slate-600 mb-1",children:s.closedCount}),e.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Closed"}),e.jsx("span",{className:"text-[9px] text-slate-400",children:"äº‹å®Ÿç¢ºèªãƒ»æ±ºæ–­"})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 p-3 rounded-xl flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-2xl font-bold text-pink-600 mb-1",children:s.subtleCount}),e.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Subtle"}),e.jsx("span",{className:"text-[9px] text-slate-400",children:"èª˜å°Žãƒ»æœ¬éŸ³æŽ¢ç´¢"})]})]})]}),e.jsxs("div",{className:"mb-8 bg-slate-50 border-l-4 border-violet-500 p-4 rounded-r-lg",children:[e.jsxs("h4",{className:"text-sm font-bold text-violet-700 mb-1 flex items-center gap-2",children:[e.jsx(I,{size:16})," ã‚³ãƒ¼ãƒã‹ã‚‰ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹"]}),e.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:s.advice})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700 border-b border-slate-100 pb-2",children:"æ¤œå‡ºã•ã‚ŒãŸè³ªå•ãƒªã‚¹ãƒˆ"}),i.length===0?e.jsx("p",{className:"text-sm text-slate-400 text-center py-4",children:"ä»Šå›žã®è­°è«–ã§ã¯æ˜Žç¢ºãªè³ªå•ãŒæ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚"}):i.map((n,x)=>e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex gap-2",children:[n.type==="OPEN"&&e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-blue-100 text-blue-700",children:"OPEN"}),n.type==="CLOSED"&&e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600",children:"CLOSED"}),n.type==="SUBTLE"&&e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-pink-100 text-pink-700",children:"SUBTLE"}),e.jsxs("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-violet-50 text-violet-600",children:["åŠ¹æžœ: ",n.effectiveness,"/10"]})]}),e.jsxs("span",{className:"text-[10px] text-slate-400 font-mono",children:["#",n.messageIndex+1]})]}),e.jsxs("p",{className:"text-slate-800 font-medium text-sm mb-3",children:['"',n.questionText,'"']}),e.jsxs("div",{className:"text-xs bg-slate-50 p-2 rounded text-slate-600 leading-relaxed",children:[e.jsx("span",{className:"font-bold text-slate-500 mr-1",children:"è©•ä¾¡:"}),n.comment]})]},x))]})]})},Ee=({questioningAnalysis:s})=>s?e.jsx(Ce,{stats:s.stats,details:s.details}):e.jsxs("div",{className:"text-center py-10 bg-slate-50 rounded-2xl border border-dashed border-slate-300 text-slate-500",children:[e.jsx(Y,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"è³ªå•åŠ›ã®è§£æžãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚"})]}),Te=({exemplars:s,messages:i,detailedReview:h})=>{var g,l;const[n,x]=k.useState(0),[o,b]=k.useState(null),f=s[n],j=i.filter(a=>a.role==="user"),u=o!==null?h.find(a=>a.messageIndex===o):null,v=a=>{switch(a){case"Mastery":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"Secure":return"bg-blue-100 text-blue-700 border-blue-200";case"Developing":return"bg-amber-100 text-amber-700 border-amber-200";case"Error":return"bg-rose-100 text-rose-700 border-rose-200"}},r=a=>{switch(a){case"Mastery":return e.jsx(z,{size:16});case"Secure":return e.jsx(T,{size:16});case"Developing":return e.jsx(_,{size:16});case"Error":return e.jsx(S,{size:16})}};return e.jsx("div",{className:"space-y-8 animate-fade-in",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-slate-800",children:[e.jsx(E,{className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"ã‚¢ãƒ³ã‚«ãƒ¼äº‹ä¾‹ (Exemplars)"}),e.jsx("p",{className:"text-xs text-slate-500",children:"ãƒ¬ãƒ™ãƒ«åˆ¥ã®æ¨¡ç¯„ä¾‹ãƒ»éžæ¨¡ç¯„ä¾‹ã‚’ç¢ºèªã—ã€è‡ªåˆ†ã®ç™ºè¨€ã¨æ¯”è¼ƒã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚"})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide mb-6 border-b border-slate-100",children:s.map((a,N)=>e.jsx("button",{onClick:()=>x(N),className:`px-4 py-2 rounded-full text-xs font-bold transition-all whitespace-nowrap border ${n===N?"bg-blue-600 text-white border-blue-600":"bg-slate-50 text-slate-500 border-slate-200 hover:bg-slate-100"}`,children:a.metricLabel},N))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(z,{size:14})," ãƒ¬ãƒ™ãƒ«åˆ¥ã‚¢ãƒ³ã‚«ãƒ¼äº‹ä¾‹"]}),e.jsx("div",{className:"space-y-3",children:f.items.map((a,N)=>e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl overflow-hidden hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:`px-3 py-1.5 flex items-center justify-between border-b ${v(a.level)}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black uppercase",children:[r(a.level),a.level,": ",a.label]}),e.jsxs("span",{className:"text-[10px] font-bold",children:["Score: ",a.score,"/10"]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("p",{className:"text-sm text-slate-800 leading-relaxed mb-3 font-medium",children:['"',a.text,'"']}),e.jsxs("div",{className:"bg-white/60 p-3 rounded-lg text-xs text-slate-600 italic",children:[e.jsx("span",{className:"font-bold text-slate-400 block mb-1 uppercase text-[9px]",children:"AI Explanation"}),a.explanation]})]})]},N))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(D,{size:14})," ã‚ãªãŸã®ç™ºè¨€ã¨æ¯”è¼ƒ (Calibration)"]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border-2 border-dashed border-slate-200 flex flex-col h-full min-h-[400px]",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 block mb-2 uppercase",children:"ç™ºè¨€ã‚’é¸æŠžã—ã¦ãã ã•ã„"}),e.jsxs("select",{onChange:a=>b(a.target.value===""?null:parseInt(a.target.value)),className:"w-full p-2.5 rounded-lg border border-slate-200 text-sm bg-slate-50 font-medium outline-none focus:ring-2 focus:ring-blue-100",children:[e.jsx("option",{value:"",children:"-- ã‚ãªãŸã®ç™ºè¨€ã‚’é¸æŠž --"}),j.map((a,N)=>e.jsxs("option",{value:i.indexOf(a),children:["#",i.indexOf(a)+1,": ",a.text.substring(0,30),"..."]},N))]})]}),o!==null?e.jsxs("div",{className:"flex-1 flex flex-col gap-6 animate-fade-in",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-4 relative",children:[e.jsxs("div",{className:"absolute -top-3 left-4 bg-blue-600 text-white text-[9px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx(A,{size:10})," YOUR TURN"]}),e.jsxs("p",{className:"text-sm text-blue-900 leading-relaxed font-medium",children:['"',i[o].text,'"']})]}),e.jsx("div",{className:"flex flex-col items-center justify-center py-2 text-slate-300",children:e.jsx(D,{size:24,className:"rotate-90"})}),e.jsxs("div",{className:"bg-emerald-50 border border-emerald-100 rounded-xl p-4 relative",children:[e.jsxs("div",{className:"absolute -top-3 left-4 bg-emerald-600 text-white text-[9px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx(z,{size:10})," MASTERY VERSION (ç†æƒ³å½¢)"]}),u!=null&&u.betterResponse?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-emerald-900 leading-relaxed italic mb-3",children:['"',u.betterResponse,'"']}),u.critique&&e.jsxs("div",{className:"text-[11px] text-emerald-700 leading-relaxed border-t border-emerald-100 pt-2",children:[e.jsx("span",{className:"font-bold",children:"æ”¹å–„ã®ãƒã‚¤ãƒ³ãƒˆ:"}),e.jsx("br",{}),u.critique]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-emerald-900 leading-relaxed italic mb-3",children:['"',(g=f.items.find(a=>a.level==="Mastery"))==null?void 0:g.text,'"']}),e.jsxs("div",{className:"text-[11px] text-emerald-700 leading-relaxed border-t border-emerald-100 pt-2",children:[e.jsx("span",{className:"font-bold",children:"å­¦ã³ã®ãƒã‚¤ãƒ³ãƒˆ:"}),e.jsx("br",{}),(l=f.items.find(a=>a.level==="Mastery"))==null?void 0:l.explanation]})]})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(A,{size:48,className:"mb-4 opacity-20"}),e.jsxs("p",{className:"text-sm font-medium",children:["è‡ªåˆ†ã®ç™ºè¨€ã‚’é¸æŠžã—ã¦ã€",e.jsx("br",{}),"ç†æƒ³çš„ãªå›žç­”ä¾‹ã¨ä¸¦ã¹ã¦æ¯”è¼ƒã—ã¾ã—ã‚‡ã†ã€‚"]})]})]})]})]})]})})};export{Me as D,Te as E,Re as L,Ee as Q,Le as S};
